# HTTP 请求规范

## 接口规范
### 请求头内容 （Header）

API 服务需要在请求的http头内包括一下内容：

* host (必填)
* Cookie (必填)
* sign（必填）


### 请求（Request）

* 请求语法

_GET /app/2_0/ProductSearch.aspx?act=GetHome&cityid=530102&plat=1 _

### header

| Header        | Content | 
| ------------- |:-------------:|
| Cookie  | cityid=**  |
| Sign     | 935E08DED147** |
| host | m.9ji.com  |


_Cookie 包含一段JSON,该JSON 描述了设备信息_

``` JSON 
{
  "os": "IOS",
  "osversion": "6.0.1",
  "devicetype": "Nexus 5",
  "devicepixels": "1080X1776",
  "producer": "Google"
}
```

 ### reqeust
 
| 参数名称 | 内容 | 是否需要 | 描述 |
| ------------- |:------------:|:-------------:|:---------:|
| act | GetHome | 是 | 方法名
| cityid | 530102 | 是 | 城市ID
| plat | 1 | 是 | 系统代号（1.android 2.IOS） |
|timestamp|2016-06-01 13:13:43|是|请求时间戳|

* 响应（Response）

API 响应返回JSON 字符串

``` JSON
{
	"stats": 1,
	"data": {
		"isforced": 1,
		"version": 32,
		"name": "9jiApp",
		"url": "http://www.9ji.com/topic/Android/ch999.apk",
		"dsc": "版本2.0.0"
	},
    "msg":"请求成功"
}
```

### Header
|Header|Content|
|----|---|
|Cache-Control|max-ag=180
|Cache-staus | HIT|
|Server|ch999ws18|


### Rseponse
|参数名称|类型|描述
|-------|----|---|
|stats|int |状态|
|data|object|对象|
|msg|String|提示信息|



## Sign 加密规则


### 加密String
|名称|类型|是否需要|描述|
|------|------|------|------|
|Method|String|是|API 接口名称|
|Timestamp|DataTime|是|时间戳(2016-06-01 13:26:48)
|AppKey|String|是|系统设置的应用key|
|V|String|1.0|是|API协议版本|


### TO JSON 
```JSON
{
  "Method": "GetHome",
  "Timestamp": "2016-06-01 13:26:48",
  "AppKey": "9ji",
  "V": "2.0"
  "UKey":"2F382E19-D793-4BFA-9CD4-0C84C6635E84"
}
```
Timestamp 和 Request 的timestamp 为同一个

加密key ：C418A41CF4DFA7AC016DA71ABC07942B

Sign ＝ Base64(MD5(JSON.toString() + key))



## ERROR CODE

API stats 返回CODE

|stats|error msg|来源|描述|
|----|----|---|---|
|90001|AUTHENTICATOR_ERROR|APP|Sign 校验不通过|
|90002|NO_SERVICE_ERROR|APP|没有此API接口|
|90003|PARAMS_ERROR|APP|参数不合法|
|90004|APPKEY_ERROR|APP|appKey 不合法|
|90006|Invalid_USER_ERROR|APP|缺少对应用户信息|
|90005|SYSTEM_ERROR|系统|服务器错误|
|99999|UnKnown_ERROR|系统|未知错误|







  

